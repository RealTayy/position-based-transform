'use strict';function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function');}function pBTransform(a,b){try{if(a instanceof jQuery)return console.log('its jQuery!'),new PBTransform(a[0],b);}catch(e){}if(a instanceof Element)return new PBTransform(a,b);if(!(a instanceof HTMLCollection))throw TypeError('Target must be a valid HTMLCollection or Element');if(a.length===1)return new PBTransform(a[0],b);if(a.length>1){var d=[];for(var c=0;c<a.length;c++){var e=new PBTransform(a[c],b);d.push(e);}return d;}}var _extends=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);}return d;};var _createClass=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(d,a.key,a);}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b;};}();var PBTransform=function(){function a(d){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,a);var c={transformTarget:d,hoverTarget:d,ignoreOthers:!1,ignoreChildren:!0,updateRate:40,maxXOffset:'2.5%',maxYOffset:'2.5%',maxXRotate:2.5,maxYRotate:2.5,rotateStyle:1,scale:1.05,initialTransform:{rotate:'0deg',translateX:'0px',translateY:'0px'},duration:'700ms',easing:'cubic-bezier(0.215, 0.61, 0.355, 1)',resetOnMouseLeave:!0};this.options=_extends({},c,b,{initialTransform:_extends({},c.initialTransform,b.initialTransform)}),b=this.options,this.transformTarget=b.transformTarget,this.hoverTarget=b.hoverTarget,this.canUpdate=!0,this.hasMoved=!1,this.init();}return _createClass(a,[{key:'init',value:function a(){var a=this;var b=this.options;return b.ignoreOthers?document.addEventListener('mousemove',function(e){if(!a.getCanUpdate())return;var c=e.pageX;var d=e.pageY;if(a.isHovering(c,d)){var f=a.getOffset(c,d);a.hasMoved=!0,a.transform(f);}else b.resetOnMouseLeave&&a.hasMoved&&(a.hasMoved=!1,a.resetPosition());}):(b.resetOnMouseLeave&&(console.log(this),this.hoverTarget.addEventListener('mouseleave',function(){a.resetPosition();})),b.ignoreChildren?this.hoverTarget.addEventListener('mousemove',function(b){if(!a.getCanUpdate())return;var c=b.pageX;var d=b.pageY;var e=a.getOffset(c,d);a.transform(e);}):this.hoverTarget.addEventListener('mousemove',function(b){if(!a.getCanUpdate())return;if(b.target===a.hoverTarget){var c=b.pageX;var d=b.pageY;var e=a.getOffset(c,d);a.transform(e);}}));}},{key:'getOffset',value:function a(o,p){var a=this.hoverTarget.getBoundingClientRect();var d=window.pageXOffset;var e=d+a.left;var f=e+a.width/2;var b=f-o;var g=b/(a.width/2)*-100;var h=window.pageYOffset;var i=h+a.top;var j=i+a.height/2;var c=j-p;var k=c/(a.height/2)*-100;var l=Math.hypot(a.width/2,a.height/2);var m=Math.hypot(b,c);var n=m/l*100;return{x:g,y:k,h:n};}},{key:'isHovering',value:function a(d,e){var a=this.hoverTarget.getBoundingClientRect();var f=window.pageXOffset;var b=f+a.left;var g=b+a.width;var h=d>=b&&d<=g;var i=window.pageYOffset;var c=i+a.top;var j=c+a.height;var k=e>=c&&e<=j;return h&&k;}},{key:'getCanUpdate',value:function a(){var a=this;return this.canUpdate?(this.canUpdate=!1,setTimeout(function(){a.canUpdate=!0;},this.options.updateRate),!0):!1;}},{key:'transform',value:function a(a){var b=this.options;var n=b.maxXOffset;var o=b.maxYOffset;var q=b.disableRotate;var c=b.maxXRotate;var e=b.maxYRotate;var r=b.rotateStyle;var s=b.duration;var t=b.easing;var m=b.initialTransform;var u=m.rotate;var v=m.translateX;var w=m.translateY;var x=b.scale;var y=parseFloat(/^([\d.]+)(\D+)$/.exec(n)[1]);var z=y*(a.x/100);var A=/^([\d.]+)(\D+)$/.exec(n)[2];var B=parseFloat(/^([\d.]+)(\D+)$/.exec(o)[1]);var C=B*(a.y/100);var D=/^([\d.]+)(\D+)$/.exec(o)[2];var j=void 0,p=void 0,d=void 0,f=void 0,g=void 0,h=void 0,i=void 0,l=void 0;if(q||c===0&&e===0)j=0;else switch(r){case 1:g=c+e;h=c/g*200;i=e/g*200;l=h*i||h||i;d=h*a.x/100||1;f=i*a.y/100||1;j=g*(d*f)/l;break;case 2:g=c+e;h=c/g*200;i=e/g*200;l=h*i||h||i;d=h*a.x/100||1;f=i*a.y/100||1;j=-g*(d*f)/l;break;case 3:p=c?e/c*((a.y+100)/200):0;d=c*(a.x/100);f=p*d||e*(a.y/100);j=d+f;break;case 4:d=c*(a.x/100);f=e*(a.y/100);j=d+f;break;}var E='translate(calc('+(z+A)+' + '+v+'), calc('+(C+D)+' + '+w+'))';var F='rotate(calc('+j+'deg + '+u+'))';var G='scale('+x+')';var k=E+' '+F+' '+G;this.transformTarget.style.webkitTransform=k,this.transformTarget.style.MozTransform=k,this.transformTarget.style.msTransform=k,this.transformTarget.style.OTransform=k,this.transformTarget.style.transform=k,this.transformTarget.style.transitionDuration=s,this.transformTarget.style.transitionTimingFunction=t;}},{key:'resetPosition',value:function a(){this.transformTarget.style.transform='';}}]),a;}();