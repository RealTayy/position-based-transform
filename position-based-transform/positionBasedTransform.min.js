'use strict';function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function');}function pBTransform(a,b){try{if(a instanceof jQuery)return console.log('its jQuery!'),new PBTransform(a[0],b);}catch(e){}if(a instanceof Element)return new PBTransform(a,b);if(!(a instanceof HTMLCollection))throw TypeError('Target must be a valid HTMLCollection or Element');if(a.length===1)return new PBTransform(a[0],b);if(a.length>1){var d=[];for(var c=0;c<a.length;c++){var e=new PBTransform(a[c],b);d.push(e);}return d;}}var _extends=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);}return d;};var _createClass=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(d,a.key,a);}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b;};}();var PBTransform=function(){function a(d){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,a);var c={transformTarget:d,hoverTarget:d,ignoreOthers:!1,ignoreChildren:!0,updateRate:40,maxTranslateX:b.maxTranslate,maxTranslateY:b.maxTranslate,maxTiltX:b.maxTilt,maxTiltY:b.maxTilt,maxRotateX:b.maxRotate/2,maxRotateY:b.maxRotate/2,rotateStyle:1,scale:undefined,initialTransform:{rotateZ:'0deg',rotateX:'0deg',rotateY:'0deg',translateX:'0px',translateY:'0px'},duration:'200ms',easing:'cubic-bezier(0.215, 0.61, 0.355, 1)',resetOnMouseLeave:!0};this.options=_extends({},c,b,{initialTransform:_extends({},c.initialTransform,b.initialTransform)}),b=this.options,this.transformTarget=b.transformTarget,this.hoverTarget=b.hoverTarget,this.canUpdate=!0,this.hasMoved=!1,this.init();}return _createClass(a,[{key:'init',value:function a(){var a=this;var b=this.options;return document.addEventListener('mousemove',function(e){if(!a.getCanUpdate())return;var c=e.pageX;var d=e.pageY;if(a.isHovering(c,d)){var f=a.getOffset(c,d);a.hasMoved=!0,a.transform(f);}else b.resetOnMouseLeave&&a.hasMoved&&(a.hasMoved=!1,a.resetPosition());});}},{key:'getOffset',value:function a(o,p){var a=this.hoverTarget.getBoundingClientRect();var d=window.pageXOffset;var e=d+a.left;var f=e+a.width/2;var b=f-o;var g=b/(a.width/2)*-100;var h=window.pageYOffset;var i=h+a.top;var j=i+a.height/2;var c=j-p;var k=c/(a.height/2)*-100;var l=Math.hypot(a.width/2,a.height/2);var m=Math.hypot(b,c);var n=m/l*100;return{x:g,y:k,h:n};}},{key:'isHovering',value:function a(d,e){var a=this.hoverTarget.getBoundingClientRect();var f=window.pageXOffset;var b=f+a.left;var g=b+a.width;var h=d>=b&&d<=g;var i=window.pageYOffset;var c=i+a.top;var j=c+a.height;var k=e>=c&&e<=j;return h&&k;}},{key:'getCanUpdate',value:function a(){var a=this;return this.canUpdate?(this.canUpdate=!1,setTimeout(function(){a.canUpdate=!0;},this.options.updateRate),!0):!1;}},{key:'transform',value:function a(a){var b=this.options;var r=b.maxTranslateX;var s=b.maxTranslateY;var c=b.maxRotateX;var e=b.maxRotateY;var v=b.maxTiltY;var w=b.maxTiltX;var B=b.rotateStyle;var C=b.duration;var D=b.easing;var k=b.initialTransform;var E=k.rotateZ;var F=k.rotateX;var G=k.rotateY;var H=k.translateX;var I=k.translateY;var x=b.scale;var y=void 0,m=void 0,t=void 0,n=void 0,u=void 0,z=void 0;r?(y=parseFloat(/^([\d.]+)(\D+)$/.exec(r)[1]),m=y*(a.x/100),t=/^([\d.]+)(\D+)$/.exec(r)[2]):(m=0,t='px'),s?(z=parseFloat(/^([\d.]+)(\D+)$/.exec(s)[1]),n=z*(a.y/100),u=/^([\d.]+)(\D+)$/.exec(s)[2]):(n=0,u='px');var j=void 0;if(c===0&&e===0)j=0;else{var A=void 0,d=void 0,f=void 0,g=void 0,h=void 0,i=void 0,o=void 0;switch(B){case 1:g=c+e;h=c/g*200;i=e/g*200;o=h*i||h||i;d=h*a.x/100||1;f=i*a.y/100||1;j=g*(d*f)/o;break;case 2:g=c+e;h=c/g*200;i=e/g*200;o=h*i||h||i;d=h*a.x/100||1;f=i*a.y/100||1;j=-g*(d*f)/o;break;case 3:A=c?e/c*((a.y+100)/200):0;d=c*(a.x/100);f=A*d||e*(a.y/100);j=d+f;break;case 4:d=c*(a.x/100);f=e*(a.y/100);j=d+f;break;default:break;}}var p=void 0;v===0?p=0:p=v*(a.y/100);var q=void 0;w===0?q=0:q=-w*(a.x/100);var J='perspective(1000px)';var K=m||n?'translate(calc('+(m+t)+' + '+H+'), calc('+(n+u)+' + '+I+'))':'';var L=p?'rotateX(calc('+p+'deg + '+F+'))':'';var M=q?'rotateY(calc('+q+'deg + '+G+'))':'';var N=j?'rotateZ(calc('+j+'deg + '+E+'))':'';var O=x?'scale('+x+')':'';var l=(J+' '+K+' '+O+' '+N+' '+L+' '+M).trim();this.transformTarget.style.transitionDuration=C,this.transformTarget.style.transitionTimingFunction=D,this.transformTarget.style.webkitTransform=l,this.transformTarget.style.MozTransform=l,this.transformTarget.style.msTransform=l,this.transformTarget.style.OTransform=l,this.transformTarget.style.transform=l;}},{key:'resetPosition',value:function a(){this.transformTarget.style.transform=options.maxTiltX||options.maxTiltY?'perspective(1000px)':'';}}]),a;}();