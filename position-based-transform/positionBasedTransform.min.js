'use strict';function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function');}function pBTransform(a,b){try{if(a instanceof jQuery)return new PBTransform(a[0],b);}catch(e){}if(a instanceof Element)return new PBTransform(a,b);if(!(a instanceof HTMLCollection))throw TypeError('Target must be a valid HTMLCollection or Element');if(a.length===1)return new PBTransform(a[0],b);if(a.length>1){var d=[];for(var c=0;c<a.length;c++){var e=new PBTransform(a[c],b);d.push(e);}return d;}}var _extends=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);}return d;};var _createClass=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(d,a.key,a);}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b;};}();var PBTransform=function(){function a(d){var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,a);var c={transformTarget:d,hoverTarget:d,ignoreOthers:!1,ignoreChildren:!0,updateRate:40,translateX:b.translate,translateY:b.translate,translateXReverse:b.translateReverse,translateYReverse:b.translateReverse,tiltX:b.tilt,tiltY:b.tilt,tiltXReverse:b.tiltReverse,tiltYReverse:b.tiltReverse,rotateX:b.rotate/2||0,rotateY:b.rotate/2||0,rotateXReverse:b.rotateReverse,rotateYReverse:b.rotateReverse,rotateStyle:1,scale:undefined,initialTransform:{rotateZ:'0deg',rotateX:'0deg',rotateY:'0deg',translateX:'0px',translateY:'0px'},duration:'200ms',easing:'cubic-bezier(0.215, 0.61, 0.355, 1)',resetOnMouseLeave:!0};this.options=_extends({},c,b,{initialTransform:_extends({},c.initialTransform,b.initialTransform)}),b=this.options,this.transformTarget=b.transformTarget,this.hoverTarget=b.hoverTarget,this.canUpdate=!0,this.hasMoved=!1,this.disabled=!1,this.enterCB=b.enterCB,this.leaveCB=b.leaveCB,this.init();}return _createClass(a,[{key:'init',value:function a(){var a=this;return document.addEventListener('mousemove',function(d){if(a.disabled)return;if(!a.getCanUpdate())return;var b=d.pageX;var c=d.pageY;if(a.isHovering(b,c)){a.enterCB&&a.hasMoved===!1&&a.enterCB(),a.hasMoved=!0;var e=a.getOffset(b,c);a.transform(e);}else a.hasMoved&&(a.hasMoved=!1,a.leaveCB&&a.leaveCB(),a.options.resetOnMouseLeave&&a.resetPosition());});}},{key:'initBugged',value:function a(){var a=this;var b=this.options;return b.ignoreOthers?document.addEventListener('mousemove',function(e){if(!a.getCanUpdate())return;var c=e.pageX;var d=e.pageY;if(a.isHovering(c,d)){var f=a.getOffset(c,d);a.hasMoved=!0,a.transform(f);}else b.resetOnMouseLeave&&a.hasMoved&&(a.hasMoved=!1,a.resetPosition());}):b.ignoreChildren?this.hoverTarget.addEventListener('mousemove',function(e){if(!a.getCanUpdate())return;var c=e.pageX;var d=e.pageY;if(a.isHovering(c,d)){var f=a.getOffset(c,d);a.transform(f);}else b.resetOnMouseLeave&&a.resetPosition();}):this.hoverTarget.addEventListener('mousemove',function(c){if(!a.getCanUpdate())return;if(c.target===a.hoverTarget){var d=c.pageX;var e=c.pageY;var f=a.getOffset(d,e);a.transform(f);}b.resetOnMouseLeave&&a.hoverTarget.addEventListener('mouseleave',function(){a.resetPosition();});});}},{key:'getOffset',value:function a(o,p){var a=this.hoverTarget.getBoundingClientRect();var d=window.pageXOffset;var e=d+a.left;var f=e+a.width/2;var b=f-o;var g=b/(a.width/2)*-100;var h=window.pageYOffset;var i=h+a.top;var j=i+a.height/2;var c=j-p;var k=c/(a.height/2)*-100;var l=Math.hypot(a.width/2,a.height/2);var m=Math.hypot(b,c);var n=m/l*100;return{x:g,y:k,h:n};}},{key:'isHovering',value:function a(d,e){var a=this.hoverTarget.getBoundingClientRect();var f=window.pageXOffset;var b=f+a.left;var g=b+a.width;var h=d>=b&&d<=g;var i=window.pageYOffset;var c=i+a.top;var j=c+a.height;var k=e>=c&&e<=j;return h&&k;}},{key:'getCanUpdate',value:function a(){var a=this;return this.canUpdate?(this.canUpdate=!1,setTimeout(function(){a.canUpdate=!0;},this.options.updateRate),!0):!1;}},{key:'transform',value:function a(b){var a=this.options;var e=a.translateX;var f=a.translateY;var K=a.translateXReverse;var L=a.translateYReverse;var y=a.tiltX;var z=a.tiltY;var M=a.tiltXReverse;var N=a.tiltYReverse;var c=a.rotateX;var g=a.rotateY;var O=a.rotateStyle;var u=a.rotateXReverse;var v=a.rotateYReverse;var k=a.initialTransform;var A=a.scale;var B=k.rotateZ;var C=k.rotateX;var D=k.rotateY;var E=k.translateX;var F=k.translateY;var P=a.duration;var Q=a.easing;var G=void 0,l=void 0,w=void 0,m=void 0,x=void 0,H=void 0;e?(G=typeof e==='number'?e:parseFloat(/^([\d.]+)(\D+)$/.exec(e)[1]),l=G*(b.x/100),w=typeof e==='number'?'px':/^([\d.]+)(\D+)$/.exec(e)[2]):(l=0,w='px'),f?(H=typeof f==='number'?f:parseFloat(/^([\d.]+)(\D+)$/.exec(f)[1]),m=H*(b.y/100),x=typeof f==='number'?'px':/^([\d.]+)(\D+)$/.exec(f)[2]):(m=0,x='px');var n=void 0;if(c||g){var I=void 0,d=void 0,h=void 0,q=void 0,r=void 0,s=void 0,J=void 0,t=void 0,o=void 0;switch(O){case 1:q=c+g;r=c/q*200;s=g/q*200;J=r*s||r||s;d=r*b.x/100||1;h=s*b.y/100||1;n=q*(d*h)/J;(u||v)&&(rotateValueZ*=-1);break;case 2:o=v?-b.y:b.y;t=u?-b.x:b.x;I=c?g/c*((o+100)/200):0;d=c*(t/100);h=I*d||g*(o/100);n=d+h;break;case 3:o=v?-b.y:b.y;t=u?-b.x:b.x;d=c*(t/100);h=g*(o/100);n=d+h;break;default:break;}}var i=void 0;z===0?i=0:i=z*(b.y/100);var j=void 0;y===0?j=0:j=-y*(b.x/100),K&&(l*=-1),L&&(m*=-1),N&&(i*=-1),M&&(j*=-1);var R=i||j?'perspective(1000px)':'';var S=l||m||E!=='0px'||F!=='0px'?'translate(calc('+(l+w)+' + '+E+'), calc('+(m+x)+' + '+F+'))':'';var T=i||C!=='0deg'?'rotateX(calc('+(i||0)+'deg + '+C+'))':'';var U=j||D!=='0deg'?'rotateY(calc('+(j||0)+'deg + '+D+'))':'';var V=n||B!=='0deg'?'rotateZ(calc('+(n||0)+'deg + '+B+'))':'';var W=A?'scale('+A+')':'';var p=(R+' '+S+' '+W+' '+V+' '+T+' '+U).trim();this.transformTarget.style.transitionDuration=P,this.transformTarget.style.transitionTimingFunction=Q,this.transformTarget.style.webkitTransform=p,this.transformTarget.style.MozTransform=p,this.transformTarget.style.msTransform=p,this.transformTarget.style.OTransform=p,this.transformTarget.style.transform=p;}},{key:'resetPosition',value:function a(){this.transformTarget.style.transform=this.options.tiltX||this.options.tiltY?'perspective(1000px)':'';}},{key:'disable',value:function a(){this.disabled=!0;}},{key:'enable',value:function a(){this.disabled=!1;}},{key:'toggle',value:function a(){this.disabled?this.disabled=!1:this.disabled=!0;}}]),a;}();